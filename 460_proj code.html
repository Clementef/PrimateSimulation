<pre><font color="#007f69">globals</font><font color="#000000">[<br /><br />   PerSpace        </font><font color="#5a5a5a">;personal space</font><font color="#000000"><br />   NearView        </font><font color="#5a5a5a">;close view</font><font color="#000000"><br />   MaxView         </font><font color="#5a5a5a">;far view</font><font color="#000000"><br />   time-units      </font><font color="#5a5a5a">;monitor to show the number of  goes</font><font color="#000000"><br />   male-ints            </font><font color="#5a5a5a">;monitor to show the number of times of male interaction carried on</font><font color="#000000"><br />   female-ints          </font><font color="#5a5a5a">;monitor to show the number of times of female interaction carried on</font><font color="#000000"><br />   aggmale         </font><font color="#5a5a5a">;aggressive interactions by males</font><font color="#000000"><br />   aggfemale       </font><font color="#5a5a5a">;aggressive inteactions by females</font><font color="#000000"><br />   vision-angle    </font><font color="#5a5a5a">;in what direction the turtle can see</font><font color="#000000"><br />   search-angle    </font><font color="#5a5a5a">;where the turtle searches for other agents</font><font color="#000000"><br /><br />   </font><font color="#5a5a5a">;;;;; EE: define chaseD and fleeD as global variables (is much safer and more logical, as these values never change or differ)</font><font color="#000000"><br />   chaseD	   </font><font color="#5a5a5a">;winner's chasing distance</font><font color="#000000"><br />   fleeD           </font><font color="#5a5a5a">;loser's fleeing distance</font><font color="#000000"><br /><br />   min-dom         </font><font color="#5a5a5a">;minimal dominance value</font><font color="#000000"><br />   randomrunnum    </font><font color="#5a5a5a">;crappy hack to get unique filenames for each run in behaviourspace experiments</font><font color="#000000"><br />   filename        </font><font color="#5a5a5a">;place for aforementioned filename</font><font color="#000000"><br />]<br /><br /><br /></font><font color="#5a5a5a">;;;;;;;;;;;;;;;;;; breeds ;;;;;;;;;;;;;;;;;;;;;;;;;</font><font color="#000000"><br /><br /></font><font color="#660096">breed</font><font color="#000000"> [ males male ]<br /></font><font color="#660096">breed</font><font color="#000000"> [ females female ]<br /><br /><br /><br /></font><font color="#5a5a5a">;;;;;;;;;;;;;;; monkey variablen ;;;;;;;;;;;;;;;;;;;</font><font color="#000000"><br /><br /></font><font color="#007f69">turtles-own</font><font color="#000000"> [<br /><br />    attraction           </font><font color="#5a5a5a">;sexual attraction</font><font color="#000000"><br />    StepDom              </font><font color="#5a5a5a">;intensity of aggression</font><font color="#000000"><br />    dom-value            </font><font color="#5a5a5a">;hierarchy variablen</font><font color="#000000"><br />    w                    </font><font color="#5a5a5a">;win variable</font><font color="#000000"><br />    diff                 </font><font color="#5a5a5a">;the actual vision angle between two agents</font><font color="#000000"><br />    opponent             </font><font color="#5a5a5a">;direkter Gegner</font><font color="#000000"><br />    distanceP            </font><font color="#5a5a5a">;the distance zu Gegner</font><font color="#000000"><br />    waitcount            </font><font color="#5a5a5a">;waiting position counter</font><font color="#000000"><br />    ]<br /><br /><br /><br /></font><font color="#5a5a5a">;;;;;;;;;;;;;;; setup-procedure ;;;;;;;;;;;;;;;;;;;</font><font color="#000000"><br /><br /></font><font color="#007f69">to</font><font color="#000000"> setup<br /><br />  </font><font color="#5a5a5a">;; (for this model to work with NetLogo's new plotting features,</font><font color="#000000"><br />  </font><font color="#5a5a5a">;; __clear-all-and-reset-ticks should be replaced with clear-all at</font><font color="#000000"><br />  </font><font color="#5a5a5a">;; the beginning of your setup procedure and reset-ticks at the end</font><font color="#000000"><br />  </font><font color="#5a5a5a">;; of the procedure.)</font><font color="#000000"><br />  __clear-all-and-reset-ticks                     </font><font color="#5a5a5a">;clear the screen</font><font color="#000000"><br /><br />  setup-globals<br />  setup-patches<br />  setup-turtles<br /></font><font color="#5a5a5a">;  setup-file  ; uncomment to save data</font><font color="#000000"><br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /><br /><br /></font><font color="#5a5a5a">;;;;;;;;;;;;;;;; creates background ;;;;;;;;;;;;;;</font><font color="#000000"><br /><br /></font><font color="#007f69">to</font><font color="#000000"> setup-patches<br />   </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">patches</font><font color="#000000">  [</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#963700">green</font><font color="#000000">]    </font><font color="#5a5a5a">;sets background green</font><font color="#000000"><br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /></font><font color="#007f69">to</font><font color="#000000"> setup-globals<br />               </font><font color="#0000aa">set</font><font color="#000000"> PerSpace </font><font color="#963700">2</font><font color="#000000"><br />               </font><font color="#0000aa">set</font><font color="#000000"> NearView </font><font color="#963700">24</font><font color="#000000"><br />               </font><font color="#0000aa">set</font><font color="#000000"> MaxView  </font><font color="#963700">50</font><font color="#000000"><br /><br />	       </font><font color="#5a5a5a">;; EE: set values of global variables</font><font color="#000000"><br />	       </font><font color="#0000aa">set</font><font color="#000000"> chaseD </font><font color="#963700">1</font><font color="#000000"><br />       	 </font><font color="#0000aa">set</font><font color="#000000"> fleeD  </font><font color="#963700">2</font><font color="#000000"><br /><br />	       </font><font color="#0000aa">set</font><font color="#000000"> vision-angle </font><font color="#963700">120</font><font color="#000000"><br />               </font><font color="#0000aa">set</font><font color="#000000"> search-angle  </font><font color="#963700">90</font><font color="#000000"><br />               </font><font color="#0000aa">set</font><font color="#000000"> min-dom </font><font color="#963700">0.1</font><font color="#000000"><br />               </font><font color="#0000aa">set</font><font color="#000000"> randomrunnum </font><font color="#660096">random</font><font color="#000000"> </font><font color="#963700">999999</font><font color="#000000"><br /><br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /><br /></font><font color="#5a5a5a">;;;;;;;;;;;;;;;; creates male and female monkeys ;;;;;;;;;;;;;;;;;;</font><font color="#000000"><br /><br /></font><font color="#007f69">to</font><font color="#000000"> setup-turtles<br /> create-males population<br />     [</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> </font><font color="#963700">black</font><font color="#000000"><br />      </font><font color="#0000aa">set</font><font color="#000000"> dom-value </font><font color="#963700">16.0</font><font color="#000000">]<br /> create-females population<br />     [</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> </font><font color="#963700">red</font><font color="#000000"><br />      </font><font color="#0000aa">set</font><font color="#000000"> dom-value </font><font color="#963700">8.0</font><font color="#000000">]<br />  </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">turtles</font><font color="#000000"> [</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">heading</font><font color="#000000"> </font><font color="#660096">random</font><font color="#000000"> </font><font color="#963700">360</font><font color="#000000"><br />               </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">shape</font><font color="#000000"> </font><font color="#963700">&quot;arrow&quot;</font><font color="#000000"><br />               </font><font color="#0000aa">setxy</font><font color="#000000"> ((</font><font color="#660096">random</font><font color="#000000"> (</font><font color="#963700">30</font><font color="#000000"> </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">0.0</font><font color="#000000">)) </font><font color="#660096">-</font><font color="#000000"> (</font><font color="#963700">30</font><font color="#000000"> </font><font color="#660096">/</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">)) ((</font><font color="#660096">random</font><font color="#000000"> (</font><font color="#963700">30</font><font color="#000000"> </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">0.0</font><font color="#000000">)) </font><font color="#660096">-</font><font color="#000000"> (</font><font color="#963700">30</font><font color="#000000"> </font><font color="#660096">/</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">))<br />                 ]<br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /></font><font color="#5a5a5a">;;;;;;;;;;;;;;;  initialize the data file (only used if you are doing analysis, for dominance &amp; centrality) ;;;;;;;;;;</font><font color="#000000"><br /><br /></font><font color="#007f69">to</font><font color="#000000"> setup-file<br /><br />  </font><font color="#0000aa">set</font><font color="#000000"> filename (</font><font color="#660096">word</font><font color="#000000"> </font><font color="#963700">&quot;ReplicationDomWorld&quot;</font><font color="#000000"> intensity-of-aggression  attraction?  randomrunnum </font><font color="#963700">&quot;.csv&quot;</font><font color="#000000">)<br />  </font><font color="#0000aa">file-open</font><font color="#000000"> filename<br />  </font><font color="#0000aa">file-print</font><font color="#000000"> (</font><font color="#660096">word</font><font color="#000000"> </font><font color="#963700">&quot;intensity of aggresion:&quot;</font><font color="#000000"> intensity-of-aggression)<br />  </font><font color="#0000aa">file-print</font><font color="#000000"> (</font><font color="#660096">word</font><font color="#000000"> </font><font color="#963700">&quot;population: &quot;</font><font color="#000000"> population)<br />  </font><font color="#0000aa">file-print</font><font color="#000000"> (</font><font color="#660096">word</font><font color="#000000"> </font><font color="#963700">&quot;attraction: &quot;</font><font color="#000000"> attraction?)<br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /></font><font color="#5a5a5a">;;;;;;;;;;;;;;;;; vision ;;;;;;;;;;;;;;;;;;;</font><font color="#000000"><br /><br /></font><font color="#007f69">to-report</font><font color="#000000"> substract-headings [h1 h2]<br />    </font><font color="#0000aa">ifelse</font><font color="#000000"> </font><font color="#660096">abs</font><font color="#000000"> (h1 </font><font color="#660096">-</font><font color="#000000"> h2) </font><font color="#660096">&lt;=</font><font color="#000000"> </font><font color="#963700">180</font><font color="#000000"><br />    [ </font><font color="#0000aa">report</font><font color="#000000"> h1 </font><font color="#660096">-</font><font color="#000000"> h2 ]<br />    [ </font><font color="#0000aa">ifelse</font><font color="#000000"> h1 </font><font color="#660096">&gt;</font><font color="#000000"> h2<br />    [ </font><font color="#0000aa">report</font><font color="#000000"> h1 </font><font color="#660096">-</font><font color="#000000"> h2 </font><font color="#660096">-</font><font color="#000000"> </font><font color="#963700">360</font><font color="#000000"> ]<br />    [ </font><font color="#0000aa">report</font><font color="#000000"> h1 </font><font color="#660096">-</font><font color="#000000"> h2 </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">360</font><font color="#000000"> ] ]<br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /></font><font color="#5a5a5a">;;;;;;;;;;;;;;;;;;;;;; reports vision variables ;;;;;;;;;;;;;;;;;;;;;;</font><font color="#000000"><br /><br /></font><font color="#007f69">To-report</font><font color="#000000"> away [ agent ]<br />    </font><font color="#0000aa">report</font><font color="#000000">  ( </font><font color="#963700">180</font><font color="#000000"> </font><font color="#660096">+</font><font color="#000000"> </font><font color="#660096">towards</font><font color="#000000"> agent )<br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /></font><font color="#007f69">to-report</font><font color="#000000"> seen-by-myself? [ agent ]<br />    </font><font color="#0000aa">report</font><font color="#000000"> (</font><font color="#660096">abs</font><font color="#000000"> (</font><font color="#660096">subtract-headings</font><font color="#000000"> ([</font><font color="#660096">towards</font><font color="#000000"> agent] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">myself</font><font color="#000000">) ([</font><font color="#660096">heading</font><font color="#000000">] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">myself</font><font color="#000000">))) </font><font color="#660096">&lt;=</font><font color="#000000"> (([vision-angle] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">myself</font><font color="#000000">) </font><font color="#660096">/</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">)<br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /></font><font color="#007f69">to-report</font><font color="#000000"> other-turtles<br />   </font><font color="#0000aa">report</font><font color="#000000"> </font><font color="#660096">turtles</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000"> [</font><font color="#660096">self</font><font color="#000000"> </font><font color="#660096">!=</font><font color="#000000"> </font><font color="#660096">myself</font><font color="#000000">]<br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /></font><font color="#007f69">to-report</font><font color="#000000"> visible-turtles [ViewSight angle]<br />    </font><font color="#0000aa">report</font><font color="#000000"> other-turtles </font><font color="#660096">in-radius</font><font color="#000000"> ViewSight </font><font color="#660096">with</font><font color="#000000"> [seen-by-myself? </font><font color="#660096">self</font><font color="#000000">]<br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /></font><font color="#007f69">to-report</font><font color="#000000"> visible-females [ViewSight angle]<br />    </font><font color="#0000aa">report</font><font color="#000000"> other-turtles </font><font color="#660096">in-radius</font><font color="#000000"> ViewSight </font><font color="#660096">with</font><font color="#000000"> [seen-by-myself? </font><font color="#660096">self</font><font color="#000000"> </font><font color="#660096">and</font><font color="#000000"> </font><font color="#660096">breed</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> females]<br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /><br /></font><font color="#007f69">to-report</font><font color="#000000"> nearest [agentset]<br />  </font><font color="#0000aa">report</font><font color="#000000"> </font><font color="#660096">min-one-of</font><font color="#000000"> agentset [</font><font color="#660096">distance</font><font color="#000000"> </font><font color="#660096">myself</font><font color="#000000">]          </font><font color="#5a5a5a">;;find nearest agent in a group</font><font color="#000000"><br /><br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /><br /></font><font color="#5a5a5a">;;;;;;;;;;;;;;;;;;;;;; interaction procedure ;;;;;;;;;;;;;;;;;;;;;;;;</font><font color="#000000"><br /><br /></font><font color="#007f69">to</font><font color="#000000"> interact<br />   </font><font color="#0000aa">let</font><font color="#000000"> winner </font><font color="#963700">0</font><font color="#000000"><br />  </font><font color="#0000aa">let</font><font color="#000000"> loser </font><font color="#963700">0</font><font color="#000000"><br />  </font><font color="#0000aa">let</font><font color="#000000"> mentalV </font><font color="#963700">0</font><font color="#000000"><br />  </font><font color="#0000aa">let</font><font color="#000000"> yyy </font><font color="#963700">0</font><font color="#000000"><br /><br /><br /><br />       </font><font color="#0000aa">set</font><font color="#000000"> opponent (nearest visible-turtles PerSpace vision-angle)     </font><font color="#5a5a5a">;opponent always exists because of conditional in integrate function</font><font color="#000000"><br />       </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">heading</font><font color="#000000"> </font><font color="#660096">towards</font><font color="#000000"> opponent<br />       </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">distance</font><font color="#000000"> opponent </font><font color="#660096">&lt;=</font><font color="#000000"> PerSpace<br />          [<br />	  </font><font color="#5a5a5a">; increment interactions</font><font color="#000000"><br />	  </font><font color="#0000aa">if</font><font color="#000000"> (</font><font color="#660096">breed</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> males)   [</font><font color="#0000aa">set</font><font color="#000000"> male-ints male-ints </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">]<br />    </font><font color="#0000aa">if</font><font color="#000000"> (</font><font color="#660096">breed</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> females) [ </font><font color="#0000aa">set</font><font color="#000000"> female-ints female-ints </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">]<br />	              </font><font color="#0000aa">set</font><font color="#000000"> mentalV ([dom-value] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">self</font><font color="#000000">)</font><font color="#660096">/</font><font color="#000000">([dom-value] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">self</font><font color="#000000"> </font><font color="#660096">+</font><font color="#000000"> [dom-value] </font><font color="#660096">of</font><font color="#000000"> opponent)<br />                </font><font color="#0000aa">ifelse</font><font color="#000000"> (mentalV </font><font color="#660096">&gt;</font><font color="#000000"> </font><font color="#660096">random-float</font><font color="#000000"> </font><font color="#963700">1.00</font><font color="#000000">)<br />                   [<br />                     </font><font color="#0000aa">set</font><font color="#000000"> winner </font><font color="#660096">self</font><font color="#000000"><br />                     </font><font color="#0000aa">set</font><font color="#000000"> loser opponent<br />                     ]<br />                   [<br />                     </font><font color="#0000aa">set</font><font color="#000000"> winner opponent<br />                     </font><font color="#0000aa">set</font><font color="#000000"> loser </font><font color="#660096">self</font><font color="#000000"><br />                     ]<br />	  	          </font><font color="#0000aa">if</font><font color="#000000"> (winner </font><font color="#660096">=</font><font color="#000000"> </font><font color="#660096">self</font><font color="#000000">)  [ fight ]<br />    ]<br /><br /></font><font color="#007f69">end</font><font color="#000000"><br /></font><font color="#5a5a5a">;;;;;;;;;;;;;;;;;;;;;;;; fighting ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</font><font color="#000000"><br /><br /></font><font color="#007f69">to</font><font color="#000000"> fight<br />  </font><font color="#0000aa">let</font><font color="#000000"> winner </font><font color="#963700">0</font><font color="#000000"><br />  </font><font color="#0000aa">let</font><font color="#000000"> loser </font><font color="#963700">0</font><font color="#000000"><br />  </font><font color="#0000aa">let</font><font color="#000000"> relativeV </font><font color="#963700">0</font><font color="#000000"><br />  </font><font color="#0000aa">let</font><font color="#000000"> yyy </font><font color="#963700">0</font><font color="#000000"><br /><br /><br /><br />	</font><font color="#5a5a5a">; increment aggressive interaction</font><font color="#000000"><br />	</font><font color="#0000aa">if</font><font color="#000000"> (</font><font color="#660096">breed</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> males) </font><font color="#660096">and</font><font color="#000000"> ([</font><font color="#660096">breed</font><font color="#000000">] </font><font color="#660096">of</font><font color="#000000"> opponent </font><font color="#660096">=</font><font color="#000000"> females) [</font><font color="#0000aa">set</font><font color="#000000"> aggmale aggmale </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">]<br />  </font><font color="#0000aa">if</font><font color="#000000"> (</font><font color="#660096">breed</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> females) </font><font color="#660096">and</font><font color="#000000"> ([</font><font color="#660096">breed</font><font color="#000000">] </font><font color="#660096">of</font><font color="#000000"> opponent </font><font color="#660096">=</font><font color="#000000"> males) [ </font><font color="#0000aa">set</font><font color="#000000"> aggfemale aggfemale </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">]<br />  </font><font color="#0000aa">set</font><font color="#000000"> relativeV ([dom-value] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">self</font><font color="#000000">)</font><font color="#660096">/</font><font color="#000000">([dom-value] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">self</font><font color="#000000"> </font><font color="#660096">+</font><font color="#000000"> [dom-value] </font><font color="#660096">of</font><font color="#000000"> opponent)<br />  </font><font color="#0000aa">ifelse</font><font color="#000000"> (relativeV </font><font color="#660096">&gt;</font><font color="#000000"> </font><font color="#660096">random-float</font><font color="#000000"> </font><font color="#963700">1.00</font><font color="#000000">)  [<br />    </font><font color="#0000aa">set</font><font color="#000000"> w </font><font color="#963700">1</font><font color="#000000"><br />    </font><font color="#0000aa">set</font><font color="#000000"> winner </font><font color="#660096">self</font><font color="#000000"><br />    </font><font color="#0000aa">set</font><font color="#000000"> loser opponent<br />  ]<br />  [<br />    </font><font color="#0000aa">set</font><font color="#000000"> w </font><font color="#963700">0</font><font color="#000000"><br />    </font><font color="#0000aa">set</font><font color="#000000"> winner opponent<br />    </font><font color="#0000aa">set</font><font color="#000000"> loser </font><font color="#660096">self</font><font color="#000000"><br />  ]<br /><br />            </font><font color="#5a5a5a">; intensity of aggression is set by a slider, so might change between interactions. Maybe this should be moved to setup turtles procedure for efficiency.</font><font color="#000000"><br />            </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">breed</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> males [</font><font color="#0000aa">set</font><font color="#000000"> StepDom </font><font color="#963700">1</font><font color="#000000"> </font><font color="#660096">*</font><font color="#000000"> intensity-of-aggression<br />                             </font><font color="#0000aa">set</font><font color="#000000"> male-ints male-ints </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">]<br />            </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">breed</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> females [</font><font color="#0000aa">set</font><font color="#000000"> StepDom </font><font color="#963700">0.8</font><font color="#000000"> </font><font color="#660096">*</font><font color="#000000"> intensity-of-aggression<br />                                </font><font color="#0000aa">set</font><font color="#000000"> female-ints female-ints </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">]<br /><br /><br />            </font><font color="#0000aa">set</font><font color="#000000"> dom-value ([dom-value] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">self</font><font color="#000000">)</font><font color="#660096">+</font><font color="#000000">(w </font><font color="#660096">-</font><font color="#000000"> relativeV) </font><font color="#660096">*</font><font color="#000000"> StepDom<br />            </font><font color="#0000aa">ask</font><font color="#000000"> opponent [</font><font color="#0000aa">set</font><font color="#000000"> dom-value ([dom-value] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">self</font><font color="#000000">)</font><font color="#660096">-</font><font color="#000000">(w </font><font color="#660096">-</font><font color="#000000"> relativeV) </font><font color="#660096">*</font><font color="#000000"> StepDom]<br />            </font><font color="#0000aa">ask</font><font color="#000000"> loser [</font><font color="#0000aa">set</font><font color="#000000"> dom-value </font><font color="#660096">max</font><font color="#000000"> (</font><font color="#660096">list</font><font color="#000000"> min-dom [dom-value] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">self</font><font color="#000000"> )]            </font><font color="#5a5a5a">;;ensure dominance values of agents are above 0.01</font><font color="#000000"><br /><br />            </font><font color="#0000aa">ask</font><font color="#000000"> winner [</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">heading</font><font color="#000000"> </font><font color="#660096">towards</font><font color="#000000"> loser </font><font color="#0000aa">fd</font><font color="#000000"> chaseD]                        </font><font color="#5a5a5a">;; the winner moves one unit towards its opponent, loser makes a 180 degree turn</font><font color="#000000"><br /><br />            </font><font color="#5a5a5a">;; EE: changed &quot;set heading away winner + random 45&quot;, which results in right-biased fleeing to: random angle that could range from -45 to +45</font><font color="#000000"><br />            </font><font color="#0000aa">ask</font><font color="#000000"> loser [</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">heading</font><font color="#000000"> away winner </font><font color="#660096">-</font><font color="#000000"> </font><font color="#963700">45</font><font color="#000000"> </font><font color="#660096">+</font><font color="#000000"> </font><font color="#660096">random</font><font color="#000000"> </font><font color="#963700">90</font><font color="#000000"> </font><font color="#0000aa">fd</font><font color="#000000"> fleeD]               </font><font color="#5a5a5a">;; and flees away two untis under a small random angle 45 degree</font><font color="#000000"><br /><br />            </font><font color="#5a5a5a">;reduce waitcount for turtles that have seen this interaction in their NearSpace</font><font color="#000000"><br /><br />            </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">turtles</font><font color="#000000"> </font><font color="#660096">in-radius</font><font color="#000000"> NearView [ </font><font color="#0000aa">if</font><font color="#000000"> (</font><font color="#660096">myself</font><font color="#000000"> </font><font color="#660096">!=</font><font color="#000000"> winner) [</font><font color="#0000aa">if</font><font color="#000000"> (seen-by-myself? winner) [ </font><font color="#0000aa">set</font><font color="#000000"> waitcount waitcount </font><font color="#660096">-</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">]]]<br /><br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /></font><font color="#5a5a5a">;;;;;;;;;;;;;;;;;;;;;;;;;;; grouping procedure ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</font><font color="#000000"><br /><br /></font><font color="#007f69">to</font><font color="#000000"> group<br />    </font><font color="#0000aa">ifelse</font><font color="#000000"> </font><font color="#660096">any?</font><font color="#000000"> visible-turtles NearView vision-angle<br />           [</font><font color="#0000aa">ifelse</font><font color="#000000"> attraction? [<br />                                </font><font color="#0000aa">ifelse</font><font color="#000000"> (</font><font color="#660096">breed</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> males)<br />                                      [</font><font color="#0000aa">if</font><font color="#000000"> (</font><font color="#660096">any?</font><font color="#000000"> visible-females NearView vision-angle)<br />                                      [</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">heading</font><font color="#000000"> </font><font color="#660096">towards</font><font color="#000000"> nearest visible-females NearView vision-angle </font><font color="#0000aa">fd</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">]]<br />                                      [ </font><font color="#0000aa">fd</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> ]]<br />                               [<br />                                </font><font color="#0000aa">fd</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> ]<br />                               ]<br />           [</font><font color="#0000aa">ifelse</font><font color="#000000"> </font><font color="#660096">any?</font><font color="#000000"> visible-turtles MaxView vision-angle<br />                   [</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">heading</font><font color="#000000"> </font><font color="#660096">towards</font><font color="#000000"> nearest visible-turtles MaxView vision-angle<br />                    </font><font color="#0000aa">fd</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">]<br /><br />                   </font><font color="#5a5a5a">;; EE: changed &quot;rt search-angle / 2 lt search-angle&quot; (which in fact equals &quot;lt search-angle / 2&quot;) to &quot;rt search-angle&quot;</font><font color="#000000"><br />                   [</font><font color="#0000aa">ifelse</font><font color="#000000"> (</font><font color="#660096">random-float</font><font color="#000000"> </font><font color="#963700">1.0</font><font color="#000000">) </font><font color="#660096">&gt;</font><font color="#000000"> </font><font color="#963700">0.5</font><font color="#000000"> [</font><font color="#0000aa">rt</font><font color="#000000"> search-angle </font><font color="#0000aa">fd</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">]                 </font><font color="#5a5a5a">;; if agent does not perceive other agents within MaxView</font><font color="#000000"><br />                                                    [</font><font color="#0000aa">lt</font><font color="#000000"> search-angle </font><font color="#0000aa">fd</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">]                 </font><font color="#5a5a5a">;; it turns a Search angle at random to the right or left</font><font color="#000000"><br />                   ]<br />           ]<br /><br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /><br /></font><font color="#5a5a5a">;;;;;;;;;;;;;;;;; integration procedure ;;;;;;;;;;;;;;;;;;;;;;;</font><font color="#000000"><br /><br /></font><font color="#007f69">to</font><font color="#000000"> integrate<br />      </font><font color="#0000aa">ifelse</font><font color="#000000"> </font><font color="#660096">any?</font><font color="#000000"> visible-turtles PerSpace vision-angle<br />                                    [interact]<br />                                    [group]<br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /><br /></font><font color="#5a5a5a">;;;;;;;;;;;;;;;; go procedure ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</font><font color="#000000"><br /><br /></font><font color="#007f69">to</font><font color="#000000"> go<br />    </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">turtles</font><font color="#000000"> [<br />                 </font><font color="#0000aa">ifelse</font><font color="#000000"> (waitcount </font><font color="#660096">&lt;=</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">)<br />                   [integrate<br />                   </font><font color="#0000aa">set</font><font color="#000000"> waitcount </font><font color="#660096">random</font><font color="#000000"> </font><font color="#963700">10</font><font color="#000000">]<br />                 [</font><font color="#0000aa">set</font><font color="#000000"> waitcount waitcount </font><font color="#660096">-</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">]<br /><br />                 ]<br /><br />      </font><font color="#0000aa">set</font><font color="#000000"> time-units time-units </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"><br />      </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">remainder</font><font color="#000000"> time-units </font><font color="#963700">160</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"><br />        [<br />          do-plot1 do-plot2<br /> </font><font color="#5a5a5a">;         print-data ; uncomment for data file</font><font color="#000000"><br />        ]<br />      </font><font color="#0000aa">if</font><font color="#000000"> time-units </font><font color="#660096">&gt;=</font><font color="#000000"> </font><font color="#963700">42800</font><font color="#000000"><br />        [<br /></font><font color="#5a5a5a">;          file-close          ; uncomment for data file</font><font color="#000000"><br />          </font><font color="#0000aa">stop</font><font color="#000000"><br />        ]<br />  </font><font color="#0000aa">tick</font><font color="#000000"><br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /><br /></font><font color="#007f69">to</font><font color="#000000"> print-data<br /></font><font color="#0000aa">let</font><font color="#000000"> mytime time-units </font><font color="#660096">/</font><font color="#000000"> </font><font color="#963700">160</font><font color="#000000"><br /><br /></font><font color="#0000aa">file-type</font><font color="#000000"> (</font><font color="#660096">word</font><font color="#000000"> mytime  </font><font color="#963700">&quot;, &quot;</font><font color="#000000">)<br />    </font><font color="#0000aa">ask</font><font color="#000000"> females<br />      [<br /><br />        </font><font color="#0000aa">file-type</font><font color="#000000"> </font><font color="#660096">precision</font><font color="#000000"> [dom-value] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">self</font><font color="#000000"> </font><font color="#963700">3</font><font color="#000000"><br />        </font><font color="#0000aa">file-type</font><font color="#000000"> </font><font color="#963700">&quot;, &quot;</font><font color="#000000"><br />      ]<br />    </font><font color="#0000aa">ask</font><font color="#000000"> males<br />      [<br /><br />        </font><font color="#0000aa">file-type</font><font color="#000000"> </font><font color="#660096">precision</font><font color="#000000"> [dom-value] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">self</font><font color="#000000"> </font><font color="#963700">3</font><font color="#000000"><br />        </font><font color="#0000aa">file-type</font><font color="#000000"> </font><font color="#963700">&quot;, &quot;</font><font color="#000000"><br />      ]<br /><br /></font><font color="#0000aa">file-type</font><font color="#000000"> (</font><font color="#660096">word</font><font color="#000000"> differentiation </font><font color="#963700">&quot;, &quot;</font><font color="#000000">)<br /><br /></font><font color="#0000aa">file-type</font><font color="#000000"> (</font><font color="#660096">word</font><font color="#000000"> aggfemale </font><font color="#963700">&quot;,&quot;</font><font color="#000000">)<br /><br /></font><font color="#0000aa">file-print</font><font color="#000000"> </font><font color="#963700">&quot; &quot;</font><font color="#000000"><br /><br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /></font><font color="#5a5a5a">;;;;;;;;;; report centrality ;;;;;;;;;;;;</font><font color="#000000"><br /><br /></font><font color="#5a5a5a">;; we do vector addition of unit vectors by</font><font color="#000000"><br />    </font><font color="#5a5a5a">; having a child turtle</font><font color="#000000"><br />    </font><font color="#5a5a5a">; move one step in the direction of each other turtle (from the parent),</font><font color="#000000"><br />    </font><font color="#5a5a5a">; report its distance from the parent, then</font><font color="#000000"><br />    </font><font color="#5a5a5a">; die.</font><font color="#000000"><br /><br /></font><font color="#007f69">to</font><font color="#000000"> report-centrality<br />  </font><font color="#0000aa">let</font><font color="#000000"> vectors </font><font color="#963700">0</font><font color="#000000"><br /><br /><br />  </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">turtles</font><font color="#000000"> [<br />    </font><font color="#0000aa">set</font><font color="#000000"> vectors [</font><font color="#660096">towards</font><font color="#000000"> </font><font color="#660096">myself</font><font color="#000000">] </font><font color="#660096">of</font><font color="#000000"> other-turtles<br />    </font><font color="#0000aa">hatch</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> [ measure-vectors vectors report-distance </font><font color="#0000aa">die</font><font color="#000000"> ]<br />    ]<br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /></font><font color="#5a5a5a">; recursive function -- go 1 in each direction until none left</font><font color="#000000"><br /></font><font color="#007f69">to</font><font color="#000000"> measure-vectors [vectors]<br />   </font><font color="#0000aa">if</font><font color="#000000"> (vectors </font><font color="#660096">!=</font><font color="#000000"> [])                      </font><font color="#5a5a5a">;if finished list, all done</font><font color="#000000"><br />     [ </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">heading</font><font color="#000000"> (</font><font color="#660096">first</font><font color="#000000"> vectors)         </font><font color="#5a5a5a">;otherwise, go 1 in direction of first element in list</font><font color="#000000"><br />       </font><font color="#0000aa">forward</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"><br />       measure-vectors (</font><font color="#660096">butfirst</font><font color="#000000"> vectors)  </font><font color="#5a5a5a">;then do this to the rest of the elements</font><font color="#000000"><br />     ]<br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /></font><font color="#5a5a5a">; write it to the file, associate with parent's ID</font><font color="#000000"><br /></font><font color="#007f69">to</font><font color="#000000"> report-distance<br />  </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">myself</font><font color="#000000"> [</font><font color="#0000aa">file-type</font><font color="#000000"> </font><font color="#660096">precision</font><font color="#000000"> </font><font color="#660096">distance</font><font color="#000000"> </font><font color="#660096">myself</font><font color="#000000"> </font><font color="#963700">3</font><font color="#000000"> </font><font color="#0000aa">file-type</font><font color="#000000"> </font><font color="#963700">&quot;, &quot;</font><font color="#000000">]<br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /></font><font color="#5a5a5a">;;;;;;;;;;;;;;;;;;;;;; plots ;;;;;;;;;;;;;;;;;;;;;</font><font color="#000000"><br /><br /></font><font color="#007f69">to</font><font color="#000000"> do-plot1<br />   </font><font color="#0000aa">set-current-plot</font><font color="#000000"> </font><font color="#963700">&quot;Males\\Females&quot;</font><font color="#000000"><br />   </font><font color="#0000aa">set-current-plot-pen</font><font color="#000000"> </font><font color="#963700">&quot;males&quot;</font><font color="#000000"><br />   </font><font color="#0000aa">plot</font><font color="#000000"> report-boys<br />   </font><font color="#0000aa">set-current-plot-pen</font><font color="#000000"> </font><font color="#963700">&quot;females&quot;</font><font color="#000000"><br />   </font><font color="#0000aa">plot</font><font color="#000000"> report-girls<br /><br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /></font><font color="#007f69">to-report</font><font color="#000000"> differentiation<br />  </font><font color="#0000aa">let</font><font color="#000000"> mean-dom-value </font><font color="#963700">0</font><font color="#000000"><br />  </font><font color="#0000aa">let</font><font color="#000000"> sd-dom-value </font><font color="#963700">0</font><font color="#000000"><br /><br />   </font><font color="#0000aa">set</font><font color="#000000"> mean-dom-value </font><font color="#660096">mean</font><font color="#000000"> [dom-value] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">turtles</font><font color="#000000"><br />   </font><font color="#0000aa">set</font><font color="#000000"> sd-dom-value </font><font color="#660096">standard-deviation</font><font color="#000000"> [dom-value] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">turtles</font><font color="#000000"><br />   </font><font color="#0000aa">report</font><font color="#000000"> </font><font color="#660096">precision</font><font color="#000000"> (sd-dom-value </font><font color="#660096">/</font><font color="#000000"> mean-dom-value) </font><font color="#963700">3</font><font color="#000000"><br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /></font><font color="#007f69">to-report</font><font color="#000000"> report-boys<br />   </font><font color="#0000aa">report</font><font color="#000000"> </font><font color="#660096">precision</font><font color="#000000"> </font><font color="#660096">mean</font><font color="#000000"> [ dom-value ] </font><font color="#660096">of</font><font color="#000000"> males </font><font color="#963700">3</font><font color="#000000"><br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /></font><font color="#007f69">to-report</font><font color="#000000"> report-girls<br />   </font><font color="#0000aa">report</font><font color="#000000"> </font><font color="#660096">precision</font><font color="#000000"> </font><font color="#660096">mean</font><font color="#000000"> [ dom-value ] </font><font color="#660096">of</font><font color="#000000"> females </font><font color="#963700">3</font><font color="#000000"><br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /></font><font color="#007f69">to-report</font><font color="#000000"> girls-beating-boys<br /></font><font color="#0000aa">let</font><font color="#000000"> total-beat-boys </font><font color="#963700">0</font><font color="#000000"><br />  </font><font color="#0000aa">let</font><font color="#000000"> girl-power </font><font color="#963700">0</font><font color="#000000"><br /><br /><br /></font><font color="#0000aa">set</font><font color="#000000"> total-beat-boys </font><font color="#963700">0</font><font color="#000000"><br /><br /></font><font color="#5a5a5a">; note horrible hack to get list from agent set -- found in netlogo mailing list JJB</font><font color="#000000"><br /></font><font color="#0000aa">foreach</font><font color="#000000"> ([</font><font color="#660096">self</font><font color="#000000">] </font><font color="#660096">of</font><font color="#000000"> females) [ ?1 -&gt;<br />  </font><font color="#0000aa">set</font><font color="#000000"> girl-power [dom-value] </font><font color="#660096">of</font><font color="#000000"> ?1<br />  </font><font color="#0000aa">foreach</font><font color="#000000"> ([</font><font color="#660096">self</font><font color="#000000">] </font><font color="#660096">of</font><font color="#000000"> males) [ ??1 -&gt;<br />    </font><font color="#0000aa">if</font><font color="#000000"> ( [dom-value] </font><font color="#660096">of</font><font color="#000000"> ??1  </font><font color="#660096">&lt;</font><font color="#000000">  girl-power)<br />      [ </font><font color="#0000aa">set</font><font color="#000000"> total-beat-boys total-beat-boys </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> ]<br />    ] ]<br /></font><font color="#0000aa">report</font><font color="#000000"> total-beat-boys<br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /></font><font color="#007f69">to</font><font color="#000000"> do-plot2<br />   </font><font color="#0000aa">set-current-plot</font><font color="#000000"> </font><font color="#963700">&quot;differentiation of dominance&quot;</font><font color="#000000"><br />   </font><font color="#0000aa">plot</font><font color="#000000"> differentiation<br /></font><font color="#007f69">end</font><font color="#000000"><br /></font>
</pre>
